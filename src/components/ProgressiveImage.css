/* Progressive Image - Pixelated Reveal Effect
   Inspired by fabianmichael.de */

.progressive-image {
  position: relative;
  overflow: hidden;
  background-color: var(--color-code-bg, #f5f5f5);
}

html.dark .progressive-image {
  background-color: var(--color-code-bg-dark, #1c1c1c);
}

/* Shared image styles */
.progressive-image__placeholder,
.progressive-image__full {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
}

/* Pixelated placeholder - the magic happens here */
.progressive-image__placeholder {
  /* This is the key: renders scaled-up pixels with sharp edges */
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
  
  opacity: 1;
  transition: opacity var(--transition-duration, 600ms) ease-out;
  z-index: 1;
}

.progressive-image__placeholder.is-hidden {
  opacity: 0;
  pointer-events: none;
}

/* Full resolution image */
.progressive-image__full {
  opacity: 0;
  transition: opacity var(--transition-duration, 600ms) ease-out;
  z-index: 2;
}

.progressive-image__full.is-loaded {
  opacity: 1;
}

/* Reduced motion: instant swap */
@media (prefers-reduced-motion: reduce) {
  .progressive-image__placeholder,
  .progressive-image__full {
    transition: none;
  }
}
